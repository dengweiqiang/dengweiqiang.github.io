name: Deploy Hugo Site to GitHub Pages

on:
  push:
    branches:
      - hugo  # å½“æ¨é€åˆ° hugo åˆ†æ”¯æ—¶è§¦å‘è‡ªåŠ¨éƒ¨ç½²

  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è¿è¡Œ

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout hugo branch
        uses: actions/checkout@v3
        with:
          ref: hugo  # æ‹‰å– hugo åˆ†æ”¯çš„æºç 

      - name: ğŸ› ï¸ Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: 'latest'
          extended: true  # ä½¿ç”¨ Hugo æ‰©å±•ç‰ˆï¼ˆé€‚ç”¨äº SCSS ç­‰ï¼‰

      - name: ğŸš€ Build the site
        run: hugo --minify  # ç”Ÿæˆ public/ ç›®å½•

      - name: ğŸ“‚ Deploy to master branch
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public  # æŒ‡å®š Hugo ç”Ÿæˆçš„é™æ€ç½‘ç«™ç›®å½•
          publish_branch: master  # å°†å†…å®¹æ¨é€åˆ° master åˆ†æ”¯
          force_orphan: true  # å¼ºåˆ¶åˆ›å»ºæ–°çš„æäº¤ï¼Œé¿å…å†å²æäº¤å½±å“

      - name: âœ… Deployment Complete
        run: echo "Hugo site deployed successfully to GitHub Pages!"
